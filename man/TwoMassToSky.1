.\" Text automatically generated by txt2man
.TH TwoMassToSky 1 "2025-06-26" "" ""
.SH NAME
\fBTwoMassToSky \fP- convert 2MASS point source catalogs to skymaker star list
.SH SYNOPSIS
.nf
.fam C
 \fBTwoMassToSky\fP [\fB-D\fP \fI2massdir\fP] [\fB-r\fP \fIRA/h\fP] [\fB-d\fP \fIDEC/deg\fP] [\fB-p\fP \fIpx\fP] [\fB-s\fP \fIarcs\fP] [\fB-m\fP \fImag\fP] [\fB-b\fP {J,H,K}] [\fB-q\fP \fIqeff\fP] > sky.list 2> sky.hdr

.fam T
.fi
.fam T
.fi
.SH OPTIONS

\fB-D\fP \fI2massdir\fP is the directory name where 2MASS catalog files psc_??? are found.
.PP
\fB-r\fP is the pointing right ascension in hours. The default is 10 degrees.
The standart colon-separated format HH:MM:SS is also recognized.
.PP
\fB-d\fP is the pointing declination in degrees. The default is \fB-89\fP.
The standart colon-separated format DD:MM:SS is also recognized.
.PP
\fB-p\fP defines the number of pixels along each of the two FITS axes. The default is 4096. Note that this must be
consistent with the IMAGE_SIZE entry in the sky.conf file.
.PP
\fB-s\fP defines the scale, arcseconds per pixel. The default is 0.37083. Note that this must be
consistent with the PIXEL_SIZE entry in the sky.conf file.
.PP
\fB-m\fP defines the limiting magnitude. The default is 40, which means effectively
the is none.
.PP
\fB-b\fP defines the infrared band selected for the magnitudes in the 2mass file.
The default is K.
.PP
\fB-q\fP defines a quantum efficiency of the detector. The default is 0.9.
.SH FILES
standard output
.PP
.nf
.fam C
     The program writes pixel coordinates to standard output as
     illustrated in the SYNPOSIS. All targets are tagged
     as stars. The magnitude inside the 2MASS catalog
     is upscaled to a magnitude in the V-band by equating
     magnitudes at their reference fluxes and scaling the
     flux with the detector q value to check against the
     limiting mag .

.fam T
.fi
standard error output
.PP
.nf
.fam C
     The program writes a FITS header support file to the standard
     error. This can later be merged into the FITS file that
     was created by sky(1).

.fam T
.fi
\fI2massdir\fP
.PP
.nf
.fam C
     Is a directory with files name psc_??? which are uncompressed
     ASCII files of the point source cataloges. Files of the extended
     source catalog are not recognized. Each of these files
     is roughly 1.6 GB in size, so the run time of the program
     is proportional to the number of these files. This means for
     earth-bound telescopes one can speed up the run time of the program
     by either removing the files, makeing them unreadable with chmod(1), or 
     g-zipping the files outside the 
     reachable regions of the sky. 

     There is currently no intelligence
     in TwoMassToSky to skip files that are known not to contains stars
     in the detector frame (although the file names would roughly be
     equivalent of sorting the targets by declination?).

     TwoMassToSky splits each line of the file at the vertical bars,
     reads the first two fields (RA and Dec), skips 4 fields, reads the J-magnitude,
     skips 3 fields, reads the H-magnitude, skips 3 fields and reads the K-magnitude.
     If the magnitude selected by the -b option is brigher than mag, and
     the sky coordinate falls into the frame, it is printed to standard output.

.fam T
.fi
.SH DESCRIPTION
The program defines a square region on the sky centered
at the RA/Dec pair of the command line arguments. The field of view has a with and height
which is the product of the options \fIpx\fP and \fIarcs\fP . The program scans
all files named \fI2massdir\fP / psc_??? for stars that fall into that
rectangular frame and prints the pixel coordinates and magnitues
to standard output in the format expected by \fBsky\fP(1) to obtain a consistent
WCS grid in the FITS file.
.SH EXAMPLE
To illustrate a typical invocation
.PP
.nf
.fam C
  src/TwoMassToSky -D . -r 17.4 -d 22.4 -p 4048 -s 0.371  > sky.xy 2> sky.hdr

  rm sky.fits
  sky sky.xy -c sky.conf

  mergeFHdr.py sky.fits sky.hdr ; ds9 sky.fits


.fam T
.fi
.SH SEE ALSO
\fBsky\fP(1) \fBmergeFHdr\fP(1)
.SH AUTHOR
Richard J. Mathar
